!function(){"use strict";angular.module("app",["app.core","app.blocks","app.frontend"])}();
!function(){"use strict";angular.module("app.blocks",["blocks.rows","blocks.headline","blocks.imgresponsive","blocks.text","blocks.videoembed","blocks.soundcloud","blocks.map"])}();
!function(){"use strict";angular.module("app.core",["app.router"])}();
!function(){"use strict";angular.module("app.frontend",["app.core","ngAnimate"])}();
!function(){"use strict";angular.module("app.router",["ui.router"])}();
!function(){"use strict";angular.module("blocks.headline",["duScroll"])}();
!function(){"use strict";angular.module("blocks.imgresponsive",[])}();
!function(){"use strict";angular.module("blocks.map",["uiGmapgoogle-maps"])}();
!function(){"use strict";angular.module("blocks.rows",[])}();
!function(){"use strict";angular.module("blocks.soundcloud",[])}();
!function(){"use strict";angular.module("blocks.text",[])}();
!function(){"use strict";angular.module("blocks.videoembed",[])}();
!function(){"use strict";function r(r,e){r.configure({docTitle:i.appTitle+": ",baseHref:"/"})}var e=angular.module("app.core"),i={appErrorPrefix:"[BSClient Error] ",appTitle:"Blockstory Client"};e.value("config",i),e.config(r),r.$inject=["routerHelperProvider","$httpProvider"]}();
!function(){"use strict";angular.module("app.core").constant("storyID","56241f8e2ff172ce01732d04").constant("baseHref","/").constant("ENV",{remote:!0,mode:"dev"})}();
!function(){"use strict";function t(t,n,o,r,i){var a="/404";r.configureStates(e(),a);var l=[i.getStyles()];return o.all(l).then(function(e){n.primaryFont=e[0].styleOptions.type.primaryFont,n.secondaryFont=e[0].styleOptions.type.secondaryFont,n.style='body { font-family: "'+n.secondaryFont+'"; font-size: 1.8rem; }',n.style+='h1,h2,h3,h4,h5,h6 { font-family: "'+n.primaryFont+'" }';var o=[];for(var r in e[0].styleOptions.type)o.push(e[0].styleOptions.type[r]);t.WebFont.load({google:{families:o},active:function(){}})})}function e(){return[{state:"404",config:{url:"/404",templateUrl:"templates/404.html",title:"404"}}]}angular.module("app.core").run(t),t.$inject=["$window","$rootScope","$q","routerHelper","dataservice"]}();
!function(){"use strict";function n(n,r,t,e,o){function i(){var n=[o.getStory()];return t.all(n).then(function(n){u.rows=n[0].layout.rows,u.hideSpinner=!0})}var u=this;u.hideSpinner=!1,i()}angular.module("app.frontend").filter("object2Array",function(){return function(n){var r=[];for(var t in n)r.push(n[t]);return r}}).controller("FrontendController",n),n.$inject=["$window","$state","$q","$scope","dataservice"]}();
!function(){"use strict";function t(t){t.configureStates(n())}function n(){return[{state:"frontend",config:{url:"/",templateUrl:"templates/frontend.html",controller:"FrontendController",controllerAs:"vm",title:"Benvenuto!"}}]}angular.module("app.frontend").run(t),t.$inject=["routerHelper"]}();
!function(){"use strict";function e(e,t,n){function o(e,o,a,i){function s(e,o){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},r.resolveAlways),t.state(e.state,e.config)}),o&&!$&&($=!0,n.otherwise(o))}function u(){o.$on("$stateChangeError",function(t,n,o,r,a,i){if(!d){v.errors++,d=!0;var s=n&&(n.title||n.name||n.loadedTemplateUrl)||"unknown target",u="Error routing to "+s+". "+(i.data||"")+". <br/>"+(i.statusText||"")+": "+(i.status||"");console.log(u,[n]),e.path("/")}})}function c(){u(),f(),g()}function l(){return a.get()}function f(){o.$on("$stateChangeSuccess",function(e,t,n,a,i){v.changes++,d=!1;var s=r.docTitle+" "+(t.title||"");o.title=s,o.baseHref=r.baseHref})}function g(){o.$on("$stateChangeStart",function(e,t){angular.element(document.querySelector("#loadingScreen")).removeClass("fadeOut")})}var d=!1,$=!1,v={errors:0,changes:0},h={configureStates:s,getStates:l,stateCounts:v};return c(),h}var r={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(r,e)},this.$get=o,o.$inject=["$location","$rootScope","$state"]}angular.module("app.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}();
!function(){"use strict";function t(t,e,r,n,o){function a(){function e(t){return t.data}function r(t){console.log("XHR Failed for getQuestions."+t.data)}var o=u+n+"?filter[fields][styleOptions]=true";return t.get(o).then(e)["catch"](r)}function i(){function e(t){return t.data}function r(t){console.log("XHR Failed for getQuestions."+t.data)}var o=u+n+"?filter[fields][layout]=true";return t.get(o).then(e)["catch"](r)}var u;u=o.remote?"http://5.101.98.193:3000/api/stories/":"http://localhost:3000/api/stories/";var c={getStyles:a,getStory:i};return c}angular.module("app.core").factory("dataservice",t),t.$inject=["$http","$q","$filter","storyID","ENV"]}();
!function(){"use strict";angular.module("blocks.headline").directive("headline",["$window","$rootScope","$location","$document",function(e,l,n,i){return{restrict:"AEC",template:'<div class="headline-container"><div class="headline-about-link"><span class="headline-about-link-flag"></span><div class="headline-about-content"></div></div><div class="headline-logo"></div><div class="headline-main-title col-md-12"><h1 class="col-md-6 col-md-offset-3 col-xs-6 col-xs-offset-3"></h1><h4 class="col-md-6 col-md-offset-3 col-xs-6 col-xs-offset-3"></h4><div class="headline-sharing col-md-6 col-md-offset-3 col-xs-6 col-xs-offset-3"><a class="headline-share-link fb btn"></a>&nbsp;<a class="headline-share-link tw btn"></a></div><div class="headline-scroll-down col-md-6 col-md-offset-3 col-xs-6 col-xs-offset-3"></div></div></div>',replace:!0,scope:{counter:"="},link:function(t,a,o){var s=angular.element(a[0].children[0].children[0]),r=angular.element(a[0].children[0].children[1]),c=angular.element(a[0].children[1]),d=angular.element(a[0].children[2].children[2].children[0]),h=angular.element(a[0].children[2].children[2].children[1]),m=angular.element(a[0].children[2].children[3]),f=t.$parent.rowCtrl.optionsT[t.counter];a.parent()[0].style.padding=0,a.css({height:e.innerHeight+"px",backgroundImage:"url("+f.imgUrl+")"}),s.text(f.aboutLinkFlag).css({fontFamily:l.primaryFont}),r.html(f.aboutContent).css({fontFamily:l.primaryFont}),c.css({width:f.logoWidth+"px",height:f.logoHeight+"px",backgroundImage:"url("+f.logoUrl+")"}),a.find("h1").html(f.title).css({fontFamily:l.primaryFont}),a.find("h4").html(f.subtitle).css({fontFamily:l.secondaryFont}),a.find("a").css({fontFamily:l.primaryFont}).attr("target","blank"),d.attr("href","https://www.facebook.com/sharer/sharer.php?u="+n.$$absUrl),h.attr("href","http://twitter.com/share?url="+n.$$absUrl+"&text=Dalla%20Piazza%20Al%20Greto%20Del%20Fiume%20-%20Un%27Esperienza%20Di%20Narrazione%20Territoriale"),s.on("click",function(){r.toggleClass("visible")}),m.on("click",function(){i.scrollTop(e.innerHeight,500)}),e.onresize=function(l){a.css({height:e.innerHeight+"px"})}}}}])}();
!function(){"use strict";angular.module("blocks.imgresponsive").directive("imgresponsive",function(){return{restrict:"AEC",template:'<div><img class="img-responsive"><p class="img-caption"></p></div>',replace:!0,scope:{counter:"="},link:function(i,t,e){var n=i.$parent.rowCtrl.optionsT[i.counter];t.find("img").attr("src",n.imgUrl),t.find("p").html(n.caption)}}})}();
!function(){"use strict";angular.module("blocks.map").directive("map",function(){return{restrict:"AEC",template:'<ui-gmap-google-map center="map.center" zoom="map.zoom" options="mapOptions"><ui-gmap-markers models="markers" coords="\'self\'" icon="\'icon\'" ></ui-gmap-markers></ui-gmap-google-map>',scope:{counter:"="},link:function(e,r,o){e.mapOptions={scrollwheel:!1};var t=e.$parent.rowCtrl.optionsT[e.counter],a=e.$parent.rowCtrl.collectionsT[e.counter];e.map={center:{latitude:parseFloat(t.centerLat),longitude:parseFloat(t.centerLng)},zoom:parseInt(t.zoom)},e.markers=[];for(var n=0;n<a.markers.length;n++)e.markers.push(a.markers[n]);var m=r[0].children[0].children[0].children[0];angular.element(m).css({height:"300px"})}}})}();
!function(){"use strict";angular.module("blocks.rows").directive("rows",["$compile",function(t){return{restrict:"E",controller:function(){this.getOptions=function(){console.log(this)}},controllerAs:"rowCtrl",link:function(o,r,i){o.rowCtrl.optionsT=[],o.rowCtrl.htmlParamsT=[],o.rowCtrl.collectionsT=[];var e=0,l="";l='<div class="row">',angular.forEach(o.row.layout,function(t,r){var i=void 0;i=t.mdoffset?" col-md-offset-"+t.mdoffset:"",l+='<div class="col-md-'+t.spanmd+i+'">',l+="<"+t.directiveName,o.options=t.directiveOptions,o.htmlParams=t.directiveHtmlParams,o.rowCtrl.optionsT[e]=t.directiveOptions,o.rowCtrl.collectionsT[e]=t.directiveCollections,o.rowCtrl.htmlParamsT[e]=t.directiveHtmlParams,angular.forEach(t.directiveHtmlParams,function(t,o){l+=" "+o+'="'+t+'"'}),l+=' counter="'+e+'"></'+t.directiveName+">",l+="</div>",e++}),l+="</div>";var c=t(l)(o);r.replaceWith(c)}}}])}();
!function(){"use strict";angular.module("blocks.soundcloud").directive("soundcloud",function(){return{restrict:"AEC",template:'<div><iframe width="100%" height="115" scrolling="yes" frameborder="no"></iframe><p>{{options.caption}}</p></div>',replace:!0,scope:{counter:"="},link:function(o,t,e){var r=o.$parent.rowCtrl.optionsT[o.counter],a="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/",s="&amp;color=222&amp;auto_play=false&amp;hide_related=true&amp;show_comments=true&amp;show_user=false&amp;show_reposts=false",i=a+r.audioID+s;t.find("iframe").attr("src",i),t.find("p").html(r.caption)}}})}();
!function(){"use strict";angular.module("blocks.text").directive("text",["$window",function(t){return{restrict:"AEC",template:"<p></p>",scope:{counter:"="},link:function(t,e,n){var r=t.$parent.rowCtrl.optionsT[t.counter];e.html(r.txt)}}}])}();
!function(){"use strict";angular.module("blocks.videoembed").directive("videoembed",["$window",function(e){return{restrict:"E",template:"<div></div>",replace:!0,scope:{counter:"="},link:function(t,o,r){var i=t.$parent.rowCtrl.optionsT[t.counter];switch(i.videoHost){case"youtube":var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);var c;e.onYouTubeIframeAPIReady=function(){c=new YT.Player(o[0],{playerVars:{autoplay:0,html5:1,theme:"light",modesbranding:1,color:"white",iv_load_policy:3,showinfo:0,controls:1},width:"100%",videoId:i.videoID})};break;case"vimeo":}}}}])}();